//===-- AltMathLibFuncs.def - Library information ---------*- C++ -*-------===//
//
// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.
// See https://llvm.org/LICENSE.txt for license information.
// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception
//
//===----------------------------------------------------------------------===//

// This .def file will create descriptions of available fpbuiltin math library
// function implementations and their constraining attributes. The current
// support is limited to a fake test library for verifying the infrastructure.
// The fake implementation can be removed when a real implementation is
// available.

// An accuracy of 0.5 indicates that the result is exact or correctly rounded.

#define FIXED(NL) ElementCount::getFixed(NL)
#define SCALABLE(NL) ElementCount::getScalable(NL)

#if !(defined(TLI_DEFINE_ALTMATHFUNC))
#define TLI_DEFINE_ALTMATHFUNC(IID, TYPE, VECSIZE, NAME, ACCURACY)  \
    {IID, TYPE, VECSIZE, NAME, ACCURACY},
#endif


#if defined(TLI_DEFINE_TEST_ALTMATHFUNCS)

// Just define a few examples to test the infrastructure

// TEST_ALTMATH_LIB Half precision implementations
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_fdiv, Type::HalfTyID, FIXED(1), "__test_altmath_fdivh_med", 2.5)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_sin, Type::HalfTyID, FIXED(1), "__test_altmath_sinh_high", 1.0)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_cos, Type::HalfTyID, FIXED(1), "__test_altmath_cosh_high", 1.0)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_cos, Type::HalfTyID, FIXED(1), "__test_altmath_cosh_med", 4.0)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_sqrt, Type::HalfTyID, FIXED(1), "__test_altmath_sqrth_cr", 0.5)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_rsqrt, Type::HalfTyID, FIXED(1), "__test_altmath_rsqrth_cr", 0.5)

// TEST_ALTMATH_LIB Single precision implementations
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_fdiv, Type::FloatTyID, FIXED(1), "__test_altmath_fdivf_med", 2.5)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_sin, Type::FloatTyID, FIXED(1), "__test_altmath_sinf_cr", 0.5)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_sin, Type::FloatTyID, FIXED(1), "__test_altmath_sinf_high", 1.0)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_cos, Type::FloatTyID, FIXED(1), "__test_altmath_cosf_high", 1.0)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_cos, Type::FloatTyID, FIXED(1), "__test_altmath_cosf_med", 4.0)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_tan, Type::FloatTyID, FIXED(1), "__test_altmath_tanf_high", 1.0)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_sqrt, Type::FloatTyID, FIXED(1), "__test_altmath_sqrtf_cr", 0.5)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_sqrt, Type::FloatTyID, FIXED(1), "__test_altmath_sqrtf_med", 2.5)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_rsqrt, Type::FloatTyID, FIXED(1), "__test_altmath_rsqrtf_cr", 0.5)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_rsqrt, Type::FloatTyID, FIXED(1), "__test_altmath_rsqrtf_high", 1.0)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_rsqrt, Type::FloatTyID, FIXED(1), "__test_altmath_rsqrtf_low", 4096.0)

// TEST_ALTMATH_LIB Double precision implementations
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_fdiv, Type::DoubleTyID, FIXED(1), "__test_altmath_fdiv_med", 2.5)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_sin, Type::DoubleTyID, FIXED(1), "__test_altmath_sin_cr", 0.5)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_sin, Type::DoubleTyID, FIXED(1), "__test_altmath_sin_high", 1.0)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_cos, Type::DoubleTyID, FIXED(1), "__test_altmath_cos_high", 1.0)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_cos, Type::DoubleTyID, FIXED(1), "__test_altmath_cos_med", 4.0)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_tan, Type::DoubleTyID, FIXED(1), "__test_altmath_tan_high", 1.0)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_sqrt, Type::DoubleTyID, FIXED(1), "__test_altmath_sqrt_cr", 0.5)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_sqrt, Type::DoubleTyID, FIXED(1), "__test_altmath_sqrt_med", 2.5)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_rsqrt, Type::DoubleTyID, FIXED(1), "__test_altmath_rsqrt_cr", 0.5)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_rsqrt, Type::DoubleTyID, FIXED(1), "__test_altmath_rsqrt_high", 1.0)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_rsqrt, Type::DoubleTyID, FIXED(1), "__test_altmath_rsqrt_low", 4096.0)

// TEST_ALTMATH_LIB 4 x float implementations
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_sin, Type::FloatTyID, FIXED(4), "__test_altmath_sinf4_high", 1.0)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_cos, Type::FloatTyID, FIXED(4), "__test_altmath_cosf4_high", 1.0)

// TEST_ALTMATH_LIB 8 x float implementations
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_sin, Type::FloatTyID, FIXED(8), "__test_altmath_sinf8_high", 1.0)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_cos, Type::FloatTyID, FIXED(8), "__test_altmath_cosf8_high", 1.0)

// TEST_ALTMATH_LIB 2 x double implementations
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_sin, Type::DoubleTyID, FIXED(2), "__test_altmath_sin2_high", 1.0)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_cos, Type::DoubleTyID, FIXED(2), "__test_altmath_cos2_high", 1.0)


#endif

#if defined(TLI_DEFINE_NO_ALTMATHFUNCS)

// NO_ALTMATH_LIB Single precision implementations
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_fadd, Type::FloatTyID, FIXED(1), "fadd", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_fsub, Type::FloatTyID, FIXED(1), "fsub", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_fmul, Type::FloatTyID, FIXED(1), "fmul", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_fdiv, Type::FloatTyID, FIXED(1), "fdiv", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_frem, Type::FloatTyID, FIXED(1), "frem", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_sin, Type::FloatTyID, FIXED(1), "sin", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_cos, Type::FloatTyID, FIXED(1), "cos", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_tan, Type::FloatTyID, FIXED(1), "tan", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_sinh, Type::FloatTyID, FIXED(1), "sinh", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_cosh, Type::FloatTyID, FIXED(1), "cosh", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_tanh, Type::FloatTyID, FIXED(1), "tanh", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_asin, Type::FloatTyID, FIXED(1), "asin", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_acos, Type::FloatTyID, FIXED(1), "acos", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_atan, Type::FloatTyID, FIXED(1), "atan", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_atan2, Type::FloatTyID, FIXED(1), "atan2", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_asinh, Type::FloatTyID, FIXED(1), "asinh", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_acosh, Type::FloatTyID, FIXED(1), "acosh", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_atanh, Type::FloatTyID, FIXED(1), "atanh", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_exp, Type::FloatTyID, FIXED(1), "exp", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_exp2, Type::FloatTyID, FIXED(1), "exp2", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_exp10, Type::FloatTyID, FIXED(1), "exp10", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_expm1, Type::FloatTyID, FIXED(1), "expm1", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_log, Type::FloatTyID, FIXED(1), "log", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_log2, Type::FloatTyID, FIXED(1), "log2", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_log10, Type::FloatTyID, FIXED(1), "log10", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_log1p, Type::FloatTyID, FIXED(1), "log1p", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_hypot, Type::FloatTyID, FIXED(1), "hypot", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_pow, Type::FloatTyID, FIXED(1), "pow", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_ldexp, Type::FloatTyID, FIXED(1), "ldexp", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_sqrt, Type::FloatTyID, FIXED(1), "sqrt", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_rsqrt, Type::FloatTyID, FIXED(1), "rsqrt", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_erf, Type::FloatTyID, FIXED(1), "erf", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_erfc, Type::FloatTyID, FIXED(1), "erfc", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_sincos, Type::FloatTyID, FIXED(1), "sincos", 0.6)

// NO_ALTMATH_LIB Double precision implementations
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_fadd, Type::DoubleTyID, FIXED(1), "fadd", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_fsub, Type::DoubleTyID, FIXED(1), "fsub", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_fmul, Type::DoubleTyID, FIXED(1), "fmul", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_fdiv, Type::DoubleTyID, FIXED(1), "fdiv", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_frem, Type::DoubleTyID, FIXED(1), "frem", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_sin, Type::DoubleTyID, FIXED(1), "sin", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_cos, Type::DoubleTyID, FIXED(1), "cos", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_tan, Type::DoubleTyID, FIXED(1), "tan", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_sinh, Type::DoubleTyID, FIXED(1), "sinh", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_cosh, Type::DoubleTyID, FIXED(1), "cosh", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_tanh, Type::DoubleTyID, FIXED(1), "tanh", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_asin, Type::DoubleTyID, FIXED(1), "asin", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_acos, Type::DoubleTyID, FIXED(1), "acos", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_atan, Type::DoubleTyID, FIXED(1), "atan", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_atan2, Type::DoubleTyID, FIXED(1), "atan2", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_asinh, Type::DoubleTyID, FIXED(1), "asinh", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_acosh, Type::DoubleTyID, FIXED(1), "acosh", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_atanh, Type::DoubleTyID, FIXED(1), "atanh", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_exp, Type::DoubleTyID, FIXED(1), "exp", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_exp2, Type::DoubleTyID, FIXED(1), "exp2", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_exp10, Type::DoubleTyID, FIXED(1), "exp10", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_expm1, Type::DoubleTyID, FIXED(1), "expm1", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_log, Type::DoubleTyID, FIXED(1), "log", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_log2, Type::DoubleTyID, FIXED(1), "log2", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_log10, Type::DoubleTyID, FIXED(1), "log10", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_log1p, Type::DoubleTyID, FIXED(1), "log1p", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_hypot, Type::DoubleTyID, FIXED(1), "hypot", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_pow, Type::DoubleTyID, FIXED(1), "pow", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_ldexp, Type::DoubleTyID, FIXED(1), "ldexp", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_sqrt, Type::DoubleTyID, FIXED(1), "sqrt", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_rsqrt, Type::DoubleTyID, FIXED(1), "rsqrt", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_erf, Type::DoubleTyID, FIXED(1), "erf", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_erfc, Type::DoubleTyID, FIXED(1), "erfc", 0.6)
TLI_DEFINE_ALTMATHFUNC(Intrinsic::fpbuiltin_sincos, Type::DoubleTyID, FIXED(1), "sincos", 0.6)

#endif

#undef TLI_DEFINE_ALTMATHFUNC
#undef TLI_DEFINE_NO_ALTMATHFUNCS
#undef TLI_DEFINE_TEST_ALTMATHFUNCS
